import{ar as h,i as c,w as k,ac as B,ah as I,aR as q,P as V,al as $,aY as M,M as C,F as W,b6 as F,av as w,aj as S,j as H,b1 as g,m as x,t as E,a3 as T,l as D}from"./_plugin-vue_export-helper-01f09012.js";import{t as O,H as _,E as be,M as Y,o as z,f as J,K as Q,a as X,T as Z,b as L}from"./DialogModal-29e49acd.js";import{b as ee}from"./use-resolve-button-type-da2c6d21.js";function te(t){var l;let s=(l=t==null?void 0:t.form)!=null?l:t.closest("form");if(s){for(let e of s.elements)if(e.tagName==="INPUT"&&e.type==="submit"||e.tagName==="BUTTON"&&e.type==="submit"||e.nodeName==="INPUT"&&e.type==="image"){e.click();return}}}function le(t,l,s){let e=h(s==null?void 0:s.value),o=c(()=>t.value!==void 0);return[c(()=>o.value?t.value:e.value),function(n){return o.value||(e.value=n),l==null?void 0:l(n)}]}let N=Symbol("LabelContext");function P(){let t=V(N,null);if(t===null){let l=new Error("You used a <Label /> component, but it is not inside a parent.");throw Error.captureStackTrace&&Error.captureStackTrace(l,P),l}return t}function ae({slot:t={},name:l="Label",props:s={}}={}){let e=h([]);function o(n){return e.value.push(n),()=>{let i=e.value.indexOf(n);i!==-1&&e.value.splice(i,1)}}return $(N,{register:o,slot:t,name:l,props:s}),c(()=>e.value.length>0?e.value.join(" "):void 0)}let ne=k({name:"Label",props:{as:{type:[Object,String],default:"label"},passive:{type:[Boolean],default:!1},id:{type:String,default:()=>`headlessui-label-${O()}`}},setup(t,{slots:l,attrs:s}){let e=P();return B(()=>I(e.register(t.id))),()=>{let{name:o="Label",slot:n={},props:i={}}=e,{id:d,passive:p,...f}=t,r={...Object.entries(i).reduce((b,[v,y])=>Object.assign(b,{[v]:q(y)}),{}),id:d};return p&&(delete r.onClick,delete f.onClick),_({ourProps:r,theirProps:f,slot:n,attrs:s,slots:l,name:o})}}}),j=Symbol("GroupContext"),se=k({name:"SwitchGroup",props:{as:{type:[Object,String],default:"template"}},setup(t,{slots:l,attrs:s}){let e=h(null),o=ae({name:"SwitchLabel",props:{onClick(){!e.value||(e.value.click(),e.value.focus({preventScroll:!0}))}}}),n=Y({name:"SwitchDescription"});return $(j,{switchRef:e,labelledby:o,describedby:n}),()=>_({theirProps:t,ourProps:{},slot:{},slots:l,attrs:s,name:"SwitchGroup"})}}),oe=k({name:"Switch",emits:{"update:modelValue":t=>!0},props:{as:{type:[Object,String],default:"button"},modelValue:{type:Boolean,default:void 0},defaultChecked:{type:Boolean,optional:!0},name:{type:String,optional:!0},value:{type:String,optional:!0},id:{type:String,default:()=>`headlessui-switch-${O()}`}},inheritAttrs:!1,setup(t,{emit:l,attrs:s,slots:e,expose:o}){let n=V(j,null),[i,d]=le(c(()=>t.modelValue),a=>l("update:modelValue",a),c(()=>t.defaultChecked));function p(){d(!i.value)}let f=h(null),r=n===null?f:n.switchRef,b=ee(c(()=>({as:t.as,type:s.type})),r);o({el:r,$el:r});function v(a){a.preventDefault(),p()}function y(a){a.key===L.Space?(a.preventDefault(),p()):a.key===L.Enter&&te(a.currentTarget)}function R(a){a.preventDefault()}let m=c(()=>{var a,u;return(u=(a=z(r))==null?void 0:a.closest)==null?void 0:u.call(a,"form")});return B(()=>{M([m],()=>{if(!m.value||t.defaultChecked===void 0)return;function a(){d(t.defaultChecked)}return m.value.addEventListener("reset",a),()=>{var u;(u=m.value)==null||u.removeEventListener("reset",a)}},{immediate:!0})}),()=>{let{id:a,name:u,value:U,...G}=t,K={checked:i.value},A={id:a,ref:r,role:"switch",type:b.value,tabIndex:0,"aria-checked":i.value,"aria-labelledby":n==null?void 0:n.labelledby.value,"aria-describedby":n==null?void 0:n.describedby.value,onClick:v,onKeyup:y,onKeypress:R};return C(W,[u!=null&&i.value!=null?C(J,Q({features:X.Hidden,as:"input",type:"checkbox",hidden:!0,readOnly:!0,checked:i.value,name:u,value:U})):null,_({ourProps:A,theirProps:{...s,...Z(G,["modelValue","defaultChecked"])},slot:K,attrs:s,slots:e,name:"Switch"})])}}}),ie=ne;const{VITE_BASEURL:re}={VITE_BASEURL:"https://2023-vue3-eastern-tea-aroma.onrender.com",BASE_URL:"/2023-Vue3-Eastern-Tea-Aroma/",MODE:"production",DEV:!1,PROD:!0},ue={props:{isDiscount:{type:Boolean,required:!0},id:{type:Number,required:!0},which:{type:String,required:!0},price:{type:Number,required:!0}},data(){return{enabled:this.isDiscount}},watch:{isDiscount(){this.enabled=this.isDiscount},enabled(){this.price<=0&&(this.enabled=!1),this.$emit("update:is-discount",this.enabled),this.$http.patch(`${re}/${this.which}/${this.id}`,{isDiscount:this.enabled}).then(()=>{this.price<=0?this.$swal.fire({icon:"error",title:"該商品不可折扣",text:"優惠後的價格不可低於 0",showConfirmButton:!1,timer:1500,allowOutsideClick:!1}):this.$swal.fire({icon:"success",title:"修改成功",showConfirmButton:!1,timer:1500,allowOutsideClick:!1})})}},mounted(){this.enabled=this.isDiscount},components:{TailWindSwitch:oe,SwitchGroup:se,SwitchLabel:ie}},ce={class:"flex items-center"},de={key:0,class:"text-brand-02"},pe={key:1,class:"text-gray-02"};function fe(t,l,s,e,o,n){const i=w("TailWindSwitch"),d=w("SwitchLabel"),p=w("SwitchGroup");return S(),H(p,null,{default:g(()=>[x("div",ce,[E(i,{modelValue:o.enabled,"onUpdate:modelValue":l[0]||(l[0]=f=>o.enabled=f),class:T([o.enabled?"bg-brand-01":"bg-gray-03","relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-brand-01 focus:ring-offset-2"])},{default:g(()=>[x("span",{class:T([o.enabled?"translate-x-6":"translate-x-1","inline-block h-4 w-4 transform rounded-full bg-white transition-transform"])},null,2)]),_:1},8,["modelValue","class"]),E(d,{class:"ml-2"},{default:g(()=>[o.enabled?(S(),D("span",de,"已套用折扣")):(S(),D("span",pe,"未使用折扣"))]),_:1})])]),_:1})}const ye=F(ue,[["render",fe]]);export{ye as D};
