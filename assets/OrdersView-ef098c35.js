import{m as b,b as p,o as u}from"./vueLoadingStore-98d1fb2a.js";import{t as k}from"./index-07d2539f.js";import{b6 as g,aj as o,l as c,j as w,s as m,T as P,k as _,F as h,at as y,m as t,aJ as a,an as T,ak as D}from"./_plugin-vue_export-helper-01f09012.js";const v={computed:{...b(u,["orders"]),myOrders(){return this.orders.filter(l=>l.userId===+sessionStorage.getItem("userId"))}},methods:{...p(u,["getOrdersData"]),totalPrice(l){const r=this.orders.findIndex(d=>d.id===l);return this.orders[r].cart.reduce((d,i)=>(d+=i.totalPrice,d),0)},discountPrice(l){const r=this.orders.findIndex(i=>i.id===l);let d=0;return this.orders[r].cart.forEach(i=>{i.isDiscount?this.orders[r].discount.type==="money"?d+=i.totalPrice-this.orders[r].discount.scale:d+=Math.round(i.totalPrice*this.orders[r].discount.scale):d+=i.totalPrice}),d},toThousand:k},mounted(){this.getOrdersData()}},f=l=>(T("data-v-d0091df8"),l=l(),D(),l),I={class:"wrap min-h-[50vh]"},Y=f(()=>t("h2",{class:"text-3xl font-black font-self text-brand-02"},"訂單資訊",-1)),M={key:0,class:"text-3xl pt-[20vh] text-center"},O={class:"flex items-center justify-between"},S={class:"min-w-[200px]"},N={class:"sm:text-xl"},V=f(()=>t("thead",{class:"bg-brand-01 bg-opacity-50 font-self"},[t("tr",null,[t("th",{class:"text-xs sm:text-base py-2"},"商品"),t("th",{class:"py-2"},"品項"),t("th",null,"價格")])],-1)),j={class:"block w-[300%] max-h-40 overflow-auto cursor-default"},B={class:"tracking-wider py-2 w-1/3"},H={class:"py-2 w-1/3"},C={key:0,class:"py-2 w-1/3"},E={class:"mx-2 text-base text-gray-02 line-through"},F={key:1,class:"w-1/3"},A={class:"tracking-wider py-2 w-1/3"},J={class:"py-2 w-1/3"},L={key:0,class:"py-2 w-1/3"},q={class:"mx-2 text-base text-gray-02 line-through"},z={key:1,class:"w-1/3"},G={class:"pt-3"},K={key:0,class:"pt-3 font-bold text-brand-02"},Q={key:1,class:"pt-3 font-bold text-brand-02"},R={class:"flex justify-center pt-3"},U={key:0,class:"sm:block flex flex-col sm:text-xl"},W={key:1,class:"sm:text-xl"};function X(l,r,d,i,Z,n){return o(),c("main",I,[(o(),w(P,{to:"title"},[m("訂單資訊")])),Y,n.myOrders.length?_("",!0):(o(),c("p",M," 當前沒有訂單 ")),(o(!0),c(h,null,y(n.myOrders.sort((e,s)=>s.id-e.id),e=>(o(),c("table",{key:e.id,class:"w-full table-fixed h-20 text-center border border-brand-05 overflow-scroll bg-white bg-opacity-20 my-6"},[t("caption",null,[t("div",O,[t("p",null,"成立日期: "+a(l.$date(e.created).format("YYYY-MM-DD")),1),t("p",S,[m(" 物流查詢編號："),t("span",N,a(e.trackingNumber),1)])])]),V,t("tbody",j,[(o(!0),c(h,null,y(e.cart,(s,x)=>(o(),c("tr",{class:"table w-full text-lg hover:bg-brand-01 hover:bg-opacity-10",key:s.totalPrice+s.isDiscount+x},[s.productId?(o(),c(h,{key:0},[t("td",B,a(s.type),1),t("td",H,a(s.type)+" * "+a(s.number),1),e.discount.code&&s.isDiscount?(o(),c("td",C,[t("p",E,a(n.toThousand(s.totalPrice))+" 元 ",1),t("p",null,a(e.discount.type==="money"?n.toThousand(s.totalPrice-e.discount.scale):n.toThousand(Math.round(s.totalPrice*e.discount.scale)))+" 元 ",1)])):(o(),c("td",F,a(n.toThousand(s.totalPrice))+" 元 ",1))],64)):_("",!0),s.courseDateId?(o(),c(h,{key:1},[t("td",A,a(s.name),1),t("td",J,a(l.$date(s.start).format("YYYY-MM-DD HH:mm"))+" ~ "+a(l.$date(s.end).format("HH:mm")),1),e.discount.code&&s.isDiscount?(o(),c("td",L,[t("p",q,a(n.toThousand(s.totalPrice))+" 元 ",1),t("p",null,a(e.discount.type==="money"?n.toThousand(s.totalPrice-e.discount.scale):n.toThousand(Math.round(s.totalPrice*e.discount.scale)))+" 元 ",1)])):(o(),c("td",z,a(n.toThousand(s.totalPrice))+" 元 ",1))],64)):_("",!0)]))),128))]),t("tfoot",null,[t("tr",null,[t("td",G,a(e.cart.length)+"件商品",1),e.isCancel?(o(),c("td",K," 已取消 ")):(o(),c("td",Q,a(e.trackingNumber?"已出貨":"未出貨"),1)),t("td",R,[e.discount.code?(o(),c("span",U," 總計 "+a(n.toThousand(n.discountPrice(e.id)))+" 元 ",1)):(o(),c("span",W,"總計 "+a(n.toThousand(n.totalPrice(e.id)))+" 元",1))])])])]))),128))])}const et=g(v,[["render",X],["__scopeId","data-v-d0091df8"]]);export{et as default};
