import{n as M}from"./runtime-dom.esm-bundler-21d14b8b.js";import{b6 as A,av as m,aj as r,l as c,m as e,t as i,b1 as n,s as a,a3 as h,F as v,at as w,aJ as f,k as g,j as C}from"./_plugin-vue_export-helper-01f09012.js";import{m as y,b as k,u as L,f as V,p as E}from"./vueLoadingStore-67bf58d2.js";import{B as N}from"./BaseFooter-0d1ef141.js";const j={props:{open:{type:Boolean},coursesList:{type:Object},productGroups:{type:Object},user:{type:Object},signOut:{type:Function},isLogin:{type:Boolean}},data(){return{choose:[]}},methods:{toggleSelected(o){this.choose.includes(o)?this.removeItem(o):this.choose.push(o)},pushItem(o){this.choose.push(o)},removeItem(o){const t=this.choose.indexOf(o);this.choose.splice(t,1)},moreNavSignOut(){this.$emit("update:open",!1),this.signOut()}}},T={class:"flex flex-col justify-between w-full absolute left-0 px-3 py-6 min-h-[90vh] bg-bgImage z-50 shadow-[0_20px_10px_rgba(0,0,0,0.1)]"},O={class:"flex flex-col"},S={class:"relative"},P={key:0},B={class:"flex flex-col"},I={class:"relative"},F={key:0,class:"flex flex-col"},G={class:"relative"},z={key:0},D={class:"mt-8"};function W(o,t,d,x,s,u){const l=m("router-link");return r(),c("div",T,[e("ul",null,[e("li",null,[i(l,{onClick:t[0]||(t[0]=M(()=>o.$emit("update:open",!1),["prevent"])),to:"/knowledge",class:"block p-4 text-brand-02 hover:bg-brand-03 hover:bg-opacity-20"},{default:n(()=>[a("茶學資訊")]),_:1})]),e("li",O,[e("div",{class:h(["p-4 flex justify-between text-brand-02 hover:bg-brand-03 hover:bg-opacity-20 cursor-pointer",{"more-active":s.choose.includes("茶藝課堂")}]),onClick:t[1]||(t[1]=()=>s.choose.includes("茶藝課堂")?u.removeItem("茶藝課堂"):u.pushItem("茶藝課堂"))},[a(" 茶藝課堂 "),e("div",S,[e("img",{src:"https://github.com/panduola666/2023-Vue3-Eastern-Tea-Aroma/blob/main/public/icon+.png?raw=true",alt:"展開",class:h(["object-none transition-all",{"scale-1":!s.choose.includes("茶藝課堂"),"scale-0":s.choose.includes("茶藝課堂")}])},null,2),e("img",{src:"https://github.com/panduola666/2023-Vue3-Eastern-Tea-Aroma/blob/main/public/icon-.png?raw=true",alt:"收合",class:h(["transition-all absolute top-0",{"scale-1":s.choose.includes("茶藝課堂"),"scale-0":!s.choose.includes("茶藝課堂")}])},null,2)])],2),s.choose.includes("茶藝課堂")?(r(),c("ul",{key:0,onClick:t[2]||(t[2]=()=>o.$emit("update:open",!1))},[(r(!0),c(v,null,w(d.coursesList,(b,p)=>(r(),c(v,{key:b.id},[p<5?(r(),c("li",P,[i(l,{to:`/course/${b.id}`,class:"block p-4 pl-8 text-gray-01 hover:bg-brand-03 hover:bg-opacity-20"},{default:n(()=>[a(f(b.title),1)]),_:2},1032,["to"])])):g("",!0)],64))),128))])):g("",!0)]),e("li",B,[e("div",{class:h(["p-4 flex justify-between text-brand-02 hover:bg-brand-03 hover:bg-opacity-20 cursor-pointer",{"more-active":s.choose.includes("茶藝用品")}]),onClick:t[3]||(t[3]=()=>s.choose.includes("茶藝用品")?u.removeItem("茶藝用品"):u.pushItem("茶藝用品"))},[a(" 茶藝用品 "),e("div",I,[e("img",{src:"https://github.com/panduola666/2023-Vue3-Eastern-Tea-Aroma/blob/main/public/icon+.png?raw=true",alt:"展開",class:h(["object-none transition-all",{"scale-1":!s.choose.includes("茶藝用品"),"scale-0":s.choose.includes("茶藝用品")}])},null,2),e("img",{src:"https://github.com/panduola666/2023-Vue3-Eastern-Tea-Aroma/blob/main/public/icon-.png?raw=true",alt:"收合",class:h(["transition-all absolute top-0",{"scale-1":s.choose.includes("茶藝用品"),"scale-0":!s.choose.includes("茶藝用品")}])},null,2)])],2),s.choose.includes("茶藝用品")?(r(),c("ul",{key:0,onClick:t[4]||(t[4]=()=>o.$emit("update:open",!1))},[(r(!0),c(v,null,w(d.productGroups,(b,p)=>(r(),c("li",{key:`前往搜尋${p}`},[i(l,{to:`/shoppingMall?page=1&search=${p}`,class:"block p-4 pl-8 text-gray-01 hover:bg-brand-03 hover:bg-opacity-20"},{default:n(()=>[a(f(p),1)]),_:2},1032,["to"])]))),128))])):g("",!0)]),d.isLogin?(r(),c("li",F,[e("div",{class:h(["p-4 flex justify-between text-brand-02 hover:bg-brand-03 hover:bg-opacity-20 cursor-pointer",{"more-active":s.choose.includes("會員中心")}]),onClick:t[5]||(t[5]=()=>u.toggleSelected("會員中心"))},[a(" 會員中心 "),e("div",G,[e("img",{src:"https://github.com/panduola666/2023-Vue3-Eastern-Tea-Aroma/blob/main/public/icon+.png?raw=true",alt:"展開",class:h(["object-none transition-all",{"scale-1":!s.choose.includes("會員中心"),"scale-0":s.choose.includes("會員中心")}])},null,2),e("img",{src:"https://github.com/panduola666/2023-Vue3-Eastern-Tea-Aroma/blob/main/public/icon-.png?raw=true",alt:"收合",class:h(["transition-all absolute top-0",{"scale-1":s.choose.includes("會員中心"),"scale-0":!s.choose.includes("會員中心")}])},null,2)])],2),s.choose.includes("會員中心")?(r(),c("ul",{key:0,onClick:t[6]||(t[6]=()=>o.$emit("update:open",!1))},[e("li",null,[i(l,{to:"/user",class:"block p-4 pl-8 text-gray-01 hover:bg-brand-03 hover:bg-opacity-20"},{default:n(()=>[a("會員專區 ")]),_:1})]),e("li",null,[i(l,{to:{name:"reserve"},class:"block p-4 pl-8 text-gray-01 hover:bg-brand-03 hover:bg-opacity-20"},{default:n(()=>[a("課程預約")]),_:1})]),e("li",null,[i(l,{to:{name:"userOrders"},class:"block p-4 pl-8 text-gray-01 hover:bg-brand-03 hover:bg-opacity-20"},{default:n(()=>[a("訂單詳情")]),_:1})]),d.user.isAdmin?(r(),c("li",z,[i(l,{to:"/admin",class:"block p-4 pl-8 text-gray-01 hover:bg-brand-03 hover:bg-opacity-20"},{default:n(()=>[a("後台管理")]),_:1})])):g("",!0)])):g("",!0)])):g("",!0)]),e("div",D,[d.isLogin?(r(),C(l,{key:0,to:"/",class:"block p-4 w-full text-gray-02 text-center hover:bg-brand-03 hover:bg-opacity-20 cursor-pointer",onClick:t[7]||(t[7]=()=>u.moreNavSignOut())},{default:n(()=>[a(" 登出 ")]),_:1})):(r(),C(l,{key:1,to:"/login",class:"btn-primary xl:text-xl leading-6 font-medium text-base block",onClick:t[8]||(t[8]=()=>o.$emit("update:open",!1))},{default:n(()=>[a("登入/註冊")]),_:1}))])])}const J=A(j,[["render",W],["__scopeId","data-v-3ca31601"]]);const U={data(){return{openMore:!1}},computed:{...y(L,["isLogin","user"]),...y(V,["courses"]),...y(E,["productGroups"]),shoppingCartLength(){var o,t;return((o=this.user.shoppingCart)==null?void 0:o.cart.products.length)+((t=this.user.shoppingCart)==null?void 0:t.cart.courses.length)},coursesList(){const o=[];return this.courses.forEach(t=>{t.courseDates.forEach(d=>{const x={id:d.id,title:t.title},s=o.findIndex(u=>u.title===t.title);s!==-1&&o.splice(s,1),o.push(x)})}),o.sort((t,d)=>d.id-t.id)}},methods:{...k(L,["signOut"]),...k(V,["getCoursesData"]),...k(E,["getAllProducts"])},components:{navMoreSelect:J},mounted(){this.getAllProducts(),this.getCoursesData()}},q={class:"shadow-md"},H={class:"mx-auto xl:w-[70%] lg:w-[80%] w-[90%] flex justify-between items-center pb-2"},K=e("img",{src:"https://github.com/panduola666/2023-Vue3-Eastern-Tea-Aroma/blob/main/public/logo.png?raw=true",alt:"東方茶香logo"},null,-1),Q={class:"hidden items-center text-brand-02 gap-7 xl:gap-14 lg:flex"},R={class:"text-xl leading-[30px] pb-[10px] pt-[18px] hover:text-brand-01"},X={class:"group relative"},Y=e("img",{src:"https://github.com/panduola666/2023-Vue3-Eastern-Tea-Aroma/blob/main/public/Property%201=arrow-down.png?raw=true",alt:"下拉選單",class:"group-hover:-rotate-180 transition"},null,-1),Z={class:"absolute button-0 left-0 hidden group-hover:block bg-white min-w-[216px] text-gray-01 shadow-lg z-50"},$={key:0},ee={class:"group relative"},te=e("img",{src:"https://github.com/panduola666/2023-Vue3-Eastern-Tea-Aroma/blob/main/public/Property%201=arrow-down.png?raw=true",alt:"展開",class:"group-hover:-rotate-180 transition"},null,-1),oe={class:"absolute button-0 left-0 hidden group-hover:block bg-white min-w-[216px] z-50 text-gray-01 shadow-lg"},se={class:"flex items-center"},le={class:"mr-8 lg:flex hidden items-center"},re={key:1,class:"relative group"},ne=e("img",{src:"https://github.com/panduola666/2023-Vue3-Eastern-Tea-Aroma/blob/main/public/Property%201=account.png?raw=true",alt:"會員專區",class:"object-contain h-9 max-w-[30px] mb-[10px] mt-[18px]"},null,-1),ie={class:"absolute bg-white min-w-[216px] button-0 group-hover:block hidden text-gray-01 z-50 shadow-lg"},ae={key:0},ce={key:0,class:"flex mb-[10px] mt-[18px]"},ue=e("img",{src:"https://github.com/panduola666/2023-Vue3-Eastern-Tea-Aroma/blob/main/public/Property%201=cart@2x.png?raw=true",alt:"購物車",class:"w-[30px] mr-6 hover:brightness-125"},null,-1),pe={key:0,class:"shoppingCartNumber transform absolute bg-brand-02 text-white text-xs leading-[16px] font-medium px-1 min-w-[16px] max-h-[16px] rounded-lg -top-[5px] left-[14px]"},he={class:"relative flex items-center lg:hidden cursor-pointer mb-[10px] mt-[18px]"};function de(o,t,d,x,s,u){const l=m("router-link"),b=m("navMoreSelect");return r(),c("nav",q,[e("div",H,[i(l,{to:"/",class:"pb-[10px] pt-[18px]"},{default:n(()=>[K]),_:1}),e("ul",Q,[e("li",R,[i(l,{to:"/knowledge"},{default:n(()=>[a("茶學資訊")]),_:1})]),e("li",X,[i(l,{to:"/courses",class:h(["flex transition-all group-hover:text-brand-01 text-xl leading-[30px] pb-[10px] pt-[18px]",{"font-semibold":this.$route.path==="/courses"}])},{default:n(()=>[a(" 茶藝課堂 "),Y]),_:1},8,["class"]),e("ul",Z,[(r(!0),c(v,null,w(u.coursesList,(p,_)=>(r(),c(v,{key:p.id},[_<5?(r(),c("li",$,[i(l,{to:`/course/${p.id}`,class:"block px-4 py-5 hover:bg-brand-03 hover:bg-opacity-20"},{default:n(()=>[a(f(p.title),1)]),_:2},1032,["to"])])):g("",!0)],64))),128))])]),e("li",ee,[i(l,{to:"/shoppingMall?page=1&search=",class:h(["flex transition-all group-hover:text-brand-01 text-xl leading-[30px] pb-[10px] pt-[18px]",{"font-semibold":this.$route.path==="/shoppingMall"}])},{default:n(()=>[a(" 茶藝用品 "),te]),_:1},8,["class"]),e("ul",oe,[(r(!0),c(v,null,w(o.productGroups,(p,_)=>(r(),c("li",{key:`前往搜尋${_}`},[i(l,{to:`/shoppingMall?page=1&search=${_}`,class:"block px-4 py-5 hover:bg-brand-03 hover:bg-opacity-20"},{default:n(()=>[a(f(_),1)]),_:2},1032,["to"])]))),128))])])]),e("div",se,[e("section",le,[o.isLogin?(r(),c("div",re,[i(l,{to:"/user"},{default:n(()=>[ne]),_:1}),e("ul",ie,[e("li",null,[i(l,{to:"/user",class:"block px-4 py-5 hover:bg-brand-03 hover:bg-opacity-20"},{default:n(()=>[a("會員專區")]),_:1})]),e("li",null,[i(l,{to:{name:"reserve"},class:"block px-4 py-5 hover:bg-brand-03 hover:bg-opacity-20"},{default:n(()=>[a("課程預約")]),_:1})]),e("li",null,[i(l,{to:{name:"userOrders"},class:"block px-4 py-5 hover:bg-brand-03 hover:bg-opacity-20"},{default:n(()=>[a("訂單詳情")]),_:1})]),o.user.isAdmin?(r(),c("li",ae,[i(l,{to:"/admin",class:"block px-4 py-5 hover:bg-brand-03 hover:bg-opacity-20"},{default:n(()=>[a("後台管理")]),_:1})])):g("",!0),e("li",null,[i(l,{to:"/",class:"block px-4 py-5 hover:bg-brand-03 hover:bg-opacity-20 text-gray-02 w-full",onClick:t[0]||(t[0]=()=>o.signOut())},{default:n(()=>[a(" 登出 ")]),_:1})])])])):(r(),C(l,{key:0,to:"/login",class:"btn-primary xl:text-xl leading-6 font-semibold text-base w-full"},{default:n(()=>[a("登入/註冊")]),_:1}))]),o.isLogin?(r(),c("section",ce,[i(l,{to:{name:"shopCart"},class:"relative"},{default:n(()=>[ue,o.isLogin&&u.shoppingCartLength>0?(r(),c("div",pe,f(u.shoppingCartLength>99?"99+":u.shoppingCartLength),1)):g("",!0)]),_:1})])):g("",!0),e("div",he,[e("img",{src:"https://github.com/panduola666/2023-Vue3-Eastern-Tea-Aroma/blob/main/public/Property%201=more.png?raw=true",alt:"more",class:h(["w-[30px] transition-all hover:brightness-125 hover:duration-[0s]",{"scale-1":!s.openMore,"scale-0":s.openMore}]),onClick:t[1]||(t[1]=M(()=>s.openMore=!s.openMore,["prevent"]))},null,2),e("img",{src:"https://github.com/panduola666/2023-Vue3-Eastern-Tea-Aroma/blob/main/public/Property%201=close@2x.png?raw=true",alt:"關閉",class:h(["w-[30px] transition-all absolute hover:brightness-75 hover:duration-[0s]",{"scale-1":s.openMore,"scale-0":!s.openMore}]),onClick:t[2]||(t[2]=M(()=>s.openMore=!s.openMore,["prevent"]))},null,2)])])]),s.openMore?(r(),C(b,{key:0,open:s.openMore,"onUpdate:open":t[3]||(t[3]=p=>s.openMore=p),coursesList:u.coursesList,productGroups:o.productGroups,user:o.user,"sign-out":o.signOut,"is-login":o.isLogin},null,8,["open","coursesList","productGroups","user","sign-out","is-login"])):g("",!0)])}const ge=A(U,[["render",de]]),be={components:{NormalNav:ge,BaseFooter:N},computed:{...y(L,["isLogin"])},methods:{...k(L,["checkLogin","overLogin"])},watch:{"$route.fullPath"(o){this.checkLogin(),(o.startsWith("/user")||o==="/shopCart"||o==="/shopCart/info")&&!this.isLogin&&this.overLogin()}},mounted(){this.checkLogin(),(this.$route.fullPath.startsWith("/user")||this.$route.fullPath==="/shopCart"||this.$route.fullPath==="/shopCart/info")&&!this.isLogin&&this.overLogin()}},me={class:"flex flex-col justify-between h-screen"};function ve(o,t,d,x,s,u){const l=m("NormalNav"),b=m("router-view"),p=m("BaseFooter");return r(),c("div",me,[e("div",null,[i(l),i(b)]),i(p)])}const ke=A(be,[["render",ve]]);export{ke as default};
